"use strict";

exports.__esModule = true;
var HOOKS = [{
	test: /^total precache size /i,
	handler: function handler(text) {
		return `\n  \u001b[32m${text}\u001b[39m`;
	}
}];

exports.default = function () {
	var out = wrap(process.stdout, invokeHooks),
	    err = wrap(process.stderr, invokeHooks);
	return function () {
		out();err();
	};
};

function wrap(stream, handler) {
	var write = stream.write;
	stream.write = function (text) {
		return write.call(stream, handler(text));
	};
	return function () {
		stream.write = write;
	};
}

function invokeHooks(text) {
	for (var i = HOOKS.length; i--;) {
		var hook = HOOKS[i];
		if (hook.test.test(text)) {
			text = hook.handler(text);
		}
	}
	return text;
}