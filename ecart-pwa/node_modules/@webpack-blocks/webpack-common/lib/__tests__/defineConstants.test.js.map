{"version":3,"sources":["../../src/__tests__/defineConstants.test.js"],"names":["webpack","DefinePlugin","DefinePluginMock","definitions","t","config","a","b","is","Object","keys","plugins","length","deepEqual","foo","bar","baz"],"mappings":";;AAAA;;;;AACA;;AACA;;;;AAEA,MAAMA,UAAU;AACdC,gBAAc,SAASC,gBAAT,CAA2BC,WAA3B,EAAwC;AACpD,SAAKA,WAAL,GAAmBA,WAAnB;AACD;AAHa,CAAhB;;AAMA,mBAAK,+DAAL,EAAuEC,CAAD,IAAO;AAC3E,QAAMC,SAAS,wBAAa,EAAEL,gBAAF,EAAb,EAA0B,CACvC,4BAAgB,EAAEM,GAAG,GAAL,EAAhB,CADuC,EAEvC,4BAAgB,EAAEC,GAAG,GAAL,EAAhB,CAFuC,CAA1B,CAAf;;AAKAH,IAAEI,EAAF,CAAKC,OAAOC,IAAP,CAAYL,OAAOM,OAAnB,EAA4BC,MAAjC,EAAyC,CAAzC;AACAR,IAAES,SAAF,CAAYJ,OAAOC,IAAP,CAAYL,OAAOM,OAAP,CAAe,CAAf,EAAkBR,WAA9B,CAAZ,EAAwD,CAAE,GAAF,EAAO,GAAP,CAAxD;AACD,CARD;;AAUA,mBAAK,sCAAL,EAA8CC,CAAD,IAAO;AAClD,QAAMC,SAAS,wBAAa,EAAEL,gBAAF,EAAb,EAA0B,CACvC,4BAAgB;AACdc,SAAK,KADS;AAEdC,SAAK;AACHC,WAAK;AADF;AAFS,GAAhB,CADuC,CAA1B,CAAf;;AASAZ,IAAEI,EAAF,CAAKC,OAAOC,IAAP,CAAYL,OAAOM,OAAnB,EAA4BC,MAAjC,EAAyC,CAAzC;AACAR,IAAES,SAAF,CAAYR,OAAOM,OAAP,CAAe,CAAf,EAAkBR,WAA9B,EAA2C;AACzCW,SAAK,OADoC;AAEzCC,SAAK;AAFoC,GAA3C;AAID,CAfD","file":"defineConstants.test.js","sourcesContent":["import test from 'ava'\nimport { createConfig } from '@webpack-blocks/core'\nimport { defineConstants } from '../index'\n\nconst webpack = {\n  DefinePlugin: function DefinePluginMock (definitions) {\n    this.definitions = definitions\n  }\n}\n\ntest('defineConstants() creates a single DefinePlugin instance only', (t) => {\n  const config = createConfig({ webpack }, [\n    defineConstants({ a: 'a' }),\n    defineConstants({ b: 'b' })\n  ])\n\n  t.is(Object.keys(config.plugins).length, 1)\n  t.deepEqual(Object.keys(config.plugins[0].definitions), [ 'a', 'b' ])\n})\n\ntest('defineConstants() encodes the values', (t) => {\n  const config = createConfig({ webpack }, [\n    defineConstants({\n      foo: 'foo',\n      bar: {\n        baz: 3\n      }\n    })\n  ])\n\n  t.is(Object.keys(config.plugins).length, 1)\n  t.deepEqual(config.plugins[0].definitions, {\n    foo: '\"foo\"',\n    bar: '{\\n  \"baz\": 3\\n}'\n  })\n})\n"]}