{"version":3,"sources":["../../src/__tests__/devServer.integration.test.js"],"names":["webpack","HotModuleReplacementPlugin","t","config","main","deepEqual","entry","devServer","hot","historyApiFallback","inline","plugins","true","second","a","b"],"mappings":";;AAAA;;;;AACA;;AACA;;;;AACA;;;;AAEA,MAAMA,UAAU;AACdC,4BADc,wCACgB,CAAE;AADlB,CAAhB;;AAIA,mBAAK,wDAAL,EAAgEC,CAAD,IAAO;AACpE,QAAMC,SAAS,wBAAa,EAAEH,gBAAF,EAAb,EAA0B,CACvC,yBAAW;AACTI,UAAM,CAAC,WAAD;AADG,GAAX,CADuC,EAIvC,0BAJuC,CAA1B,CAAf;;AAOAF,IAAEG,SAAF,CAAYF,MAAZ,EAAoB;AAClBG,WAAO;AACLF,YAAM,CAAC,WAAD,EAAc,6BAAd;AADD,KADW;AAIlBG,eAAW;AACTC,WAAK,IADI;AAETC,0BAAoB,IAFX;AAGTC,cAAQ;AAHC,KAJO;AASlBC,aAAS,CACP,EADO;AATS,GAApB;AAaAT,IAAEU,IAAF,CAAOT,OAAOQ,OAAP,CAAe,CAAf,aAA6BX,QAAQC,0BAA5C;AACD,CAtBD;;AAwBA,mBAAK,qDAAL,EAA6DC,CAAD,IAAO;AACjE,QAAMC,SAAS,wBAAa,EAAEH,gBAAF,EAAb,EAA0B,CACvC,yBAAW;AACTI,UAAM,CAAC,WAAD,CADG;AAETS,YAAQ,CAAC,aAAD;AAFC,GAAX,CADuC,EAKvC,yBAAU;AACRH,YAAQ;AADA,GAAV,CALuC,EAQvC,yBAAU,kBAAV,CARuC,CAA1B,CAAf;;AAWAR,IAAEG,SAAF,CAAYF,MAAZ,EAAoB;AAClBG,WAAO;AACLF,YAAM,CAAC,WAAD,EAAc,kBAAd,CADD;AAELS,cAAQ,CAAC,aAAD,EAAgB,kBAAhB;AAFH,KADW;AAKlBN,eAAW;AACTC,WAAK,IADI;AAETC,0BAAoB,IAFX;AAGTC,cAAQ;AAHC,KALO;AAUlBC,aAAS,CACP,EADO;AAVS,GAApB;AAcAT,IAAEU,IAAF,CAAOT,OAAOQ,OAAP,CAAe,CAAf,aAA6BX,QAAQC,0BAA5C;AACD,CA3BD;;AA6BA;AACA,mBAAK,yDAAL,EAAiEC,CAAD,IAAO;AACrE,QAAMC,SAAS,wBAAa,EAAEH,gBAAF,EAAb,EAA0B,CACvC,yBAAW;AACTc,OAAG,KADM;AAETC,OAAG,CAAC,KAAD;AAFM,GAAX,CADuC,EAKvC,0BALuC,CAA1B,CAAf;;AAQAb,IAAEG,SAAF,CAAYF,OAAOG,KAAnB,EAA0B;AACxBQ,OAAG,CAAC,KAAD,EAAQ,6BAAR,CADqB;AAExBC,OAAG,CAAC,KAAD,EAAQ,6BAAR;AAFqB,GAA1B;AAID,CAbD","file":"devServer.integration.test.js","sourcesContent":["import test from 'ava'\nimport { createConfig } from '@webpack-blocks/core'\nimport devServer from '../devServer'\nimport { entryPoint } from '../webpack'\n\nconst webpack = {\n  HotModuleReplacementPlugin () {}\n}\n\ntest('devServer() without options provides expected defaults', (t) => {\n  const config = createConfig({ webpack }, [\n    entryPoint({\n      main: ['./test.js']\n    }),\n    devServer()\n  ])\n\n  t.deepEqual(config, {\n    entry: {\n      main: ['./test.js', 'webpack/hot/only-dev-server']\n    },\n    devServer: {\n      hot: true,\n      historyApiFallback: true,\n      inline: true\n    },\n    plugins: [\n      {}\n    ]\n  })\n  t.true(config.plugins[0] instanceof webpack.HotModuleReplacementPlugin)\n})\n\ntest('devServer() uses custom options and can be composed', (t) => {\n  const config = createConfig({ webpack }, [\n    entryPoint({\n      main: ['./test.js'],\n      second: ['./second.js']\n    }),\n    devServer({\n      inline: false\n    }),\n    devServer('some-entry-point')\n  ])\n\n  t.deepEqual(config, {\n    entry: {\n      main: ['./test.js', 'some-entry-point'],\n      second: ['./second.js', 'some-entry-point']\n    },\n    devServer: {\n      hot: true,\n      historyApiFallback: true,\n      inline: false\n    },\n    plugins: [\n      {}\n    ]\n  })\n  t.true(config.plugins[0] instanceof webpack.HotModuleReplacementPlugin)\n})\n\n// Regression test for https://github.com/andywer/webpack-blocks/issues/76\ntest('devServer block extends multiple entry points correctly', (t) => {\n  const config = createConfig({ webpack }, [\n    entryPoint({\n      a: './a',\n      b: ['./b']\n    }),\n    devServer()\n  ])\n\n  t.deepEqual(config.entry, {\n    a: ['./a', 'webpack/hot/only-dev-server'],\n    b: ['./b', 'webpack/hot/only-dev-server']\n  })\n})\n"]}