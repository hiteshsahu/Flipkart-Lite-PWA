'use strict';

var _ava = require('ava');

var _ava2 = _interopRequireDefault(_ava);

var _devServer = require('../devServer');

var _devServer2 = _interopRequireDefault(_devServer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const webpack = {
  HotModuleReplacementPlugin: function HotModuleReplacementPluginMock() {}
};

(0, _ava2.default)('devServer() add himself to every entries', t => {
  const currentConfig = {
    entry: {
      main: ['./test.js'],
      second: ['./second.js']
    }
  };

  const context = { webpack: webpack };
  const block = (0, _devServer2.default)('entry');
  block(context, currentConfig);

  const config = block.post(context, currentConfig);
  t.deepEqual(config.entry, { main: ['entry'], second: ['entry'] });
});

(0, _ava2.default)('devServer() use webpack/hot/only-dev-server as default', t => {
  const currentConfig = {
    entry: {
      main: ['./test.js']
    }
  };

  const context = { webpack: webpack };
  const block = (0, _devServer2.default)();
  block(context, currentConfig);

  const config = block.post(context, currentConfig);
  t.deepEqual(config.entry.main, ['webpack/hot/only-dev-server']);
});
//# sourceMappingURL=devServer.test.js.map